#!/bin/bash

# SPDX-License-Identifier: GPL-2.0-or-later
# Copyright (C) 2024-present ROCKNIX (https://github.com/ROCKNIX)

. /etc/profile

  if [ ! -f "/storage/.config/mac_addr.conf" ]; then
    # Read SOC serial
    bytes=$(cat /sys/devices/soc0/serial_number)
    # Format bytes into MAC address format
    MAC_ADDR=$(echo "00:03:7F:${bytes:4:2}:${bytes:6:2}:${bytes:8:2}")

    # Output the random MAC address
    echo $MAC_ADDR > "/storage/.config/mac_addr.conf"
  fi
